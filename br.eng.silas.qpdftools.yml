id: br.eng.silas.qpdftools
runtime: org.kde.Platform
runtime-version: '6.10'
sdk: org.kde.Sdk
command: qpdftools
cleanup:
  - '/include'
  - '/share/doc'
  - '/share/man'
finish-args:
  - --socket=wayland
  - --socket=fallback-x11
  - --filesystem=home
  - --share=ipc
  - --device=dri
modules:
  - name: ghostscript
    config-opts:
      - --disable-cups
      - --disable-dbus
      - --disable-gtk
    sources:
      - type: archive
        url: https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs10060/ghostscript-10.06.0.tar.gz
        sha256: 5bd6da34794928cc7e616f288e32bd0be7f9a5ca2d3c206a0af2c19a4e3a318f
        x-checker-data:
          - type: anitya
            id: 1157
            url-template: https://github.com/ArtifexSoftware/ghostpdl-downloads/releases/download/gs${major}0$minor$patch/ghostscript-$version.tar.gz

  - name: qpdf
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
    sources:
      - type: archive
        url: https://github.com/qpdf/qpdf/archive/refs/tags/v12.2.0.tar.gz
        sha256: 2d004611699a94030a594318393f08a7352ab1cf3cee337c5312d4e7eb7f8a4f
        x-checker-data:
          - type: anitya
            id: 5542
            url-template: https://github.com/qpdf/qpdf/archive/refs/tags/v$version.tar.gz

  - name: qpdftools
    buildsystem: cmake-ninja
    config-opts:
      - -DCMAKE_BUILD_TYPE=Release
    sources:
      - type: git
        url: https://github.com/silash35/qpdftools.git
        tag: v3.1.3
        commit: 22da16c6c69e7831a374ade5456816eeca8d3773
        x-checker-data:
          - type: git
            tag-pattern: v([\d.]+)$
